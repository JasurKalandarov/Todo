<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .navbar-brand img {
            width: 150px;
            height: 75px;
            object-fit: cover;
            object-position: center;
        }
        .list-group-item:hover {
            background-color: #f8f9fa;
            transform: scale(1.02);
        }
        .list-group-item-warning { border-left: 5px solid #ffc107; }
        .list-group-item-success { border-left: 5px solid #28a745; }
        .list-group-item-danger  { border-left: 5px solid #dc3545; }
        .list-group-item-dark    { border-left: 5px solid #343a40; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –ª—ë–≥–∫–æ–π —Ç–µ–Ω—å—é */
        .content-card {
            background-color: white;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            border-radius: 12px;
            height: 735px;;
            padding: 2rem;
        }
    </style>
</head>
<body class="bg-light" style="min-height: 100vh;">

{% block authlog %}{% endblock %}
{% load static %}

<div class="row g-0">

    <!-- üîπ –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (—Å–µ—Ä—ã–π —Ñ–æ–Ω) -->
    <div class="col-auto d-flex flex-column justify-content-between align-items-center py-3"
         style="background-color: #343a40; min-height: 100vh; width: 50px;">
        <div class="d-flex flex-column align-items-center gap-4 w-100">
            <div class="d-flex justify-content-center w-100">
                <a href="#offcanvasScrolling" class="text-light" title="–ü—Ä–æ—Ñ–∏–ª—å"
                   data-bs-toggle="offcanvas" role="button" aria-controls="offcanvasScrolling">
                    <i class="bi bi-person-fill"></i>
                </a>
            </div>
            <a href="{% url 'home-view' %}" class="text-light" title="–ì–ª–∞–≤–Ω–∞—è">
                <i class="bi bi-house fs-5"></i>
            </a>
            <a href="#" class="text-light" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                <i class="bi bi-gear fs-5"></i>
            </a>

            <a href="#offcanvasCalendar" class="text-light" title="–ö–∞–ª–µ–Ω–¥–∞—Ä—å"
               data-bs-toggle="offcanvas" role="button" aria-controls="offcanvasCalendar">
                <i class="bi bi-calendar3 fs-5"></i>
            </a>
        </div>
    </div>


    <!-- üî∏ –°—Ä–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞ (sidebar, —Å–µ—Ä—ã–π —Ñ–æ–Ω) -->
    <div class="col-2 py-4 px-3" style="background-color: #e9ecef;">
        {% include "task/sidebar.html" %}
    </div>

    <!-- üî∏ –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç ‚Äì –±–µ–ª–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞) -->
    <div class="col py-4 px-4" style="background-color: #e9ecef;">
        <div class="content-card">
            {% block content %}{% endblock %}
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>

{% include 'accounts/toasts.html' %}

<script>
document.addEventListener("DOMContentLoaded", function () {
    const detailModal = document.getElementById('exampleModalDetail');

    detailModal.addEventListener('show.bs.modal', function (event) {
        let button = event.relatedTarget;

        let title = button.getAttribute('data-task-title');
        let description = button.getAttribute('data-task-description');
        let done = button.getAttribute('data-task-done');
        let deleted = button.getAttribute('data-task-deleted');
        let created = button.getAttribute('data-task-created');
        let updated = button.getAttribute('data-task-updated');

        // —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –≤ "YYYY-MM-DD HH:mm:ss"
        function formatDate(dateStr) {
            if (!dateStr) return "-";
            let date = new Date(dateStr);
            if (isNaN(date)) return dateStr;

            let yyyy = date.getFullYear();
            let mm = String(date.getMonth() + 1).padStart(2, "0");
            let dd = String(date.getDate()).padStart(2, "0");
            let hh = String(date.getHours()).padStart(2, "0");
            let min = String(date.getMinutes()).padStart(2, "0");
            let ss = String(date.getSeconds()).padStart(2, "0");

            return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;
        }

        detailModal.querySelector("#detailTaskTitle").textContent = title || "-";
        detailModal.querySelector("#detailTaskDescription").textContent = description || "-";
        detailModal.querySelector("#detailTaskDone").textContent = (done === "True") ? "–î–∞" : "–ù–µ—Ç";
        detailModal.querySelector("#detailTaskDeleted").textContent = (deleted === "True") ? "–î–∞" : "–ù–µ—Ç";
        detailModal.querySelector("#detailTaskCreatedAt").textContent = formatDate(created);
        detailModal.querySelector("#detailTaskUpdatedAt").textContent = updated ? formatDate(updated) : "–ï—â—ë –Ω–µ –∏–∑–º–µ–Ω—è–ª–æ—Å—å";
    });
});
</script>




</body>
</html>
