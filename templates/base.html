<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> {% block title %} {% endblock %} </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .navbar-brand img {
            width: 150px; /* Ширина контейнера */
            height: 75px; /* Высота контейнера */
            object-fit: cover; /* Обрезка изображения */
            object-position: center; /* Позиция обрезки */
        }
    </style>
</head>
<body>

<!-- Auth & Login -->
{% block authlog %}

{% endblock %}

<div class="row">

    <!-- column 1 -->
    <div class="col">
        {% include "task/sidebar.html" %} <!-- Включает модальное окно для деталей задачи -->
    </div>

    <!-- column 2 -->
    <div class="col-6">
        {% block content %} {% endblock %}
    </div>

    <!-- column 3 -->
    <div class="col">
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
</body>
</html>


<!-- BOOTSTRAP POPPER -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

<!-- CUSTOM SCRIPT CODE -->
<script>

    // MODAL DETAIL SCRIPT
    document.addEventListener('DOMContentLoaded', function () {
        // Handle detail modal
        var exampleModalDetail = document.getElementById('exampleModalDetail');
        exampleModalDetail.addEventListener('show.bs.modal', function (event) {
            var button = event.relatedTarget;
            var taskTitle = button.getAttribute('data-task-title');
            var taskDescription = button.getAttribute('data-task-description');
            var taskDone = button.getAttribute('data-task-done');
            var taskDeleted = button.getAttribute('data-task-deleted');
            var taskCreated = button.getAttribute('data-task-created');
            var taskUpdated = button.getAttribute('data-task-updated');

            var modalTitle = exampleModalDetail.querySelector('#detailTaskTitle');
            var modalDescription = exampleModalDetail.querySelector('#detailTaskDescription');
            var modalDone = exampleModalDetail.querySelector('#detailTaskDone');
            var modalDeleted = exampleModalDetail.querySelector('#detailTaskDeleted');
            var modalCreatedAt = exampleModalDetail.querySelector('#detailTaskCreatedAt');
            var modalUpdatedAt = exampleModalDetail.querySelector('#detailTaskUpdatedAt');

            modalTitle.textContent = taskTitle;
            modalDescription.textContent = taskDescription;
            modalDone.textContent = taskDone;
            modalDeleted.textContent = taskDeleted;
            modalCreatedAt.textContent = taskCreated;
            modalUpdatedAt.textContent = taskUpdated;
        });
    });

    // MODAL EDIT SCRIPT
    document.addEventListener('DOMContentLoaded', function () {
        var examplemodalEdit = document.getElementById('staticBackdrop');
        examplemodalEdit.addEventListener('show.bs.modal', function (event) {
            var button = event.relatedTarget;
            var taskId = button.getAttribute('data-task-id');
            var taskTitle = button.getAttribute('data-task-title');
            var taskDescription = button.getAttribute('data-task-description');
            var taskDone = button.getAttribute('data-task-done');
            var taskDeleted = button.getAttribute('data-task-deleted');

            var taskIdInput = examplemodalEdit.querySelector('#editTaskId');
            var taskTitleInput = examplemodalEdit.querySelector('#editTaskTitle');
            var taskDescriptionInput = examplemodalEdit.querySelector('#editTaskDescription');
            var taskDoneInput = examplemodalEdit.querySelector('#editTaskDone');
            var taskDeleteInput = examplemodalEdit.querySelector('#editTaskDeleted');

            taskIdInput.value = taskId;
            taskTitleInput.value = taskTitle;
            taskDescriptionInput.value = taskDescription;
            taskDoneInput.checked = taskDone === 'True';
            taskDeleteInput.checked = taskDeleted === 'True';
        })

    });

    // MODAL DELETE SCRIPT
    document.addEventListener('DOMContentLoaded', function () {
        var exampleModalDelete = document.getElementById('exampleModalDelete');
        exampleModalDelete.addEventListener('show.bs.modal', function (event) {
            var button = event.relatedTarget;
            var taskId = button.getAttribute('data-task-id');
            console.log(taskId)
            var modalTaskIdInput = exampleModalDelete.querySelector('#deleteTaskId');

            modalTaskIdInput.value = taskId;
        });
    });


</script>