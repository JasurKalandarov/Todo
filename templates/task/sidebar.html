<!-- SIDEBAR -->
{% load static %}
<style>
    #offcanvasScrolling {
        width: 350px; /* ширина боковой панели */
    }
    #calendar {
        max-width: 100%;
        margin: 15px auto;
        background: #fff;
        border-radius: 8px;
        padding: 8px;
    }
</style>

<div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasScrolling"
     aria-labelledby="offcanvasScrollingLabel">

    <div class="offcanvas-header">
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <!-- PROFILE -->
    <div class="text-center my-4">
        <!-- Фото -->
        <div class="text-center">
            <img src="{% static 'img/jesco.jpg' %}"
                 class="rounded-circle shadow mb-3"
                 width="90" height="90" alt="User">
            <h5 class="mb-1">{{ request.user.username }}</h5>
        </div>

        <!-- Меню -->
        <ul class="list-group list-group-flush mt-3">
            <li class="list-group-item bg-transparent">
                <a href="{% url 'profile' %}" class="text-decoration-none text-dark">
                    <i class="bi bi-info-square"></i> Мои данные
                </a>
            </li>
            <li class="list-group-item bg-transparent">
                <a href="{% url 'logout' %}" class="text-danger text-decoration-none">
                    <i class="bi bi-box-arrow-left"></i> Выход
                </a>
            </li>
        </ul>
    </div>

</div>

<!-- TASKS LIST -->
<ol class="list-group">
  <img src="https://lh6.ggpht.com/aiY9J8YK8Lzr7hMC7nZWlZGiBn8TF_PY7NVNy5U1i5g4zG8yEPzEZTJK2WwbWJUogg"
       width="100" height="100" class="img-fluid ms-auto" alt="...">

    <!-- Невыполненные -->
    <li class="list-group-item list-group-item-action rounded-top" style="border-left: 5px solid #FFC107;">
      <a class="d-flex justify-content-between align-items-center link-underline link-underline-opacity-0"
         href="{% url 'home-view' %}">
        <div class="d-flex align-items-center gap-2">
          <i class="bi bi-house text-warning"></i>
          <span class="fw-bold text-warning">Невыполненные</span>
        </div>
        <span class="badge text-bg-warning rounded-pill">{{ todo_count }}</span>
      </a>
    </li>

    <!-- Выполненные -->
    <li class="list-group-item list-group-item-action" style="border-left: 5px solid #198754;">
    <a class="d-flex justify-content-between align-items-center link-underline link-underline-opacity-0"
       href="{% url 'done_task_view' %}">
      <div class="d-flex align-items-center gap-2">
        <i class="bi bi-calendar-check text-success"></i>
        <span class="fw-bold text-success">Выполненные</span>
      </div>
      <span class="badge text-bg-success rounded-pill">{{ done_count }}</span>
    </a>
    </li>

    <!-- Удаленные -->
    <li class="list-group-item list-group-item-action"
        style="border-left: 5px solid #dc3545;">
      <a class="d-flex justify-content-between align-items-center link-underline link-underline-opacity-0"
         href="{% url 'task-delete-view' %}">
        <div class="d-flex align-items-center gap-2">
          <i class="bi bi-trash3 text-danger"></i>
          <span class="fw-bold text-danger">Удаленные</span>
        </div>
        <span class="badge text-bg-danger rounded-pill">{{ deleted_count }}</span>
      </a>
    </li>

    <!-- Выполненные и Удаленные -->
    <li class="list-group-item list-group-item-action" style="border-left: 5px solid #212529;">
        <a class="d-flex justify-content-between align-items-center link-underline link-underline-opacity-0"
        href="{% url 'done-delete-task-view' %}">
            <div class="d-flex align-items-center gap-2">
                <i class="bi bi-trash2-fill text-dark"></i>
                <span class="fw-bold text-dark">Выполненные и Удаленные</span>
            </div>
            <span class="badge text-bg-dark rounded-pill">{{ done_delete_count }}</span>
        </a>
    </li>
</ol>

<!-- Календарь -->
<div class="offcanvas offcanvas-end text-light" tabindex="-1" id="offcanvasCalendar" aria-labelledby="offcanvasCalendarLabel"
     style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); width: 350px;">
    <div class="offcanvas-header border-bottom border-light">
        <h5 class="offcanvas-title" id="offcanvasCalendarLabel">Календарь</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
    </div>
    <div class="offcanvas-body">
        {% include "task/calendar.html" %}
    </div>
</div>
